(()=>{const t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=[],o=[];let s,a;const d=new Audio("sources/completed-task.mp3"),c={burger:document.getElementById("burger"),sidebar:document.getElementById("sidebar"),inbox:document.getElementById("inbox"),completedTasks:document.getElementById("completed-tasks"),inboxCounter:document.getElementById("inbox-counter"),completedCounter:document.getElementById("completed-counter"),switch:document.getElementById("switch"),add:document.getElementById("add"),tasks:document.getElementById("tasks"),navBtns:document.querySelectorAll(".sidebar-todo__button"),contents:document.querySelectorAll(".todo__content"),completed:document.getElementById("completed"),modalDel:document.querySelector(".modal-del"),modalDelClose:document.querySelector(".modal-del__close"),modalDelText:document.querySelector(".modal-del__text span"),modalDelCancel:document.querySelector(".modal-del__cancel"),modalDelRemove:document.querySelector(".modal-del__remove"),notify:document.getElementById("notification")};function l(t){localStorage.setItem("theme",t),document.documentElement.className=t}function i(t){localStorage.setItem("sidebar",t)}function r(){0==n.length?c.inboxCounter.innerHTML="":c.inboxCounter.innerHTML=`${n.length}`}function m(t){const e=t.currentTarget.parentElement;e.classList.add("todo__add--active"),function(t){t.innerHTML='\n\t\t<input type="text" class="add-todo__input todo__task-input" placeholder="Task name">\n\t\t\t<div class="add-todo__actions">\n\t\t\t\t<button class="add-todo__cancel btn-cancel">Cancel</button>\n\t\t\t\t<button class="add-todo__add btn-add">Add task</button>\n\t\t\t</div>';const e=t.querySelector(".add-todo__input"),o=t.querySelector(".add-todo__cancel"),s=t.querySelector(".add-todo__add");e.focus(),s.disabled=!0,s.style.opacity=.8,s.style.pointerEvents="none";let a="";e.addEventListener("input",(t=>{a=t.target.value,g(a,s)})),e.addEventListener("keyup",(t=>{"Enter"==t.key&&""==!t.target.value&&u(e,a,s,n)})),e.addEventListener("keydown",(e=>{"Escape"==e.key&&_(t)})),s.addEventListener("click",(()=>{u(e,a,s,n)})),o.addEventListener("click",(()=>{_(t)}))}(e)}function u(t,e,o,s){const d={id:Date.now(),text:e};s.push(d),p(n),t.value="",t.focus(),o.disabled=!0,o.style.opacity=.8,o.style.pointerEvents="none",c.inboxCounter.innerHTML=`${n.length}`,c.inbox.scrollHeight>a&&(c.inbox.style.overflowY="scroll"),v(mssg="Task added")}function _(t){t.classList.remove("todo__add--active"),t.innerHTML='\n\t<button id="add" class="add-todo__btn">\n\t\t<span class="add-todo__plus"></span>\n\t\t<span class="add-todo__text">Add task</span>\n\t</button>\n\t',document.getElementById("add").addEventListener("click",m)}function p(t){let e="";for(let n in t)e+=`<div id=${t[n].id} class="todo__task">\n\t\t\t<label class="todo__checkbox">\n\t\t\t\t<input type="checkbox">\n\t\t\t\t<div class="todo__checkbox-div"></div>\n\t\t\t</label>\n\t\t\t<p class="todo__task-text">${t[n].text}</p>\n\t\t\t<div class="todo__task-actions">\n\t\t\t\t<button class="todo__task-edit" title="Edit task">\n\t\t\t\t\t<img src="images/svg/edit.svg" alt="Edit">\n\t\t\t\t</button>\n\t\t\t\t<button class="todo__task-delete" title="Delete task">\n\t\t\t\t\t<img src="images/svg/trash.svg" alt="Trash">\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t`;c.tasks.innerHTML=e}function v(t){c.notify.innerHTML=`<div class="notification__content">\n\t\t<span class="notification__caption">${t}!</span>\n\t\t<button class="notification__close btn-close" title="Close"></button>\n\t</div>`,document.querySelector(".notification__close").addEventListener("click",(t=>{t.target.parentElement.remove()}))}function g(t,e){""===t?(e.disabled=!0,e.style.opacity=.8,e.style.pointerEvents="none"):(e.disabled=!1,e.style.opacity=1,e.style.pointerEvents="all")}function b(t,e,o){t.forEach((t=>{t.id===parseInt(e)&&(t.text=o.value)})),p(n)}function y(){p(n)}function k(){c.modalDel.classList.remove("modal-del--open")}!function(){const t=localStorage.getItem("theme");"light-theme"==t?l("light-theme"):"dark-theme"==t&&(c.switch.classList.add("switch-todo--active"),l("dark-theme"))}(),c.switch.addEventListener("click",(t=>{t.currentTarget.classList.toggle("switch-todo--active"),"dark-theme"==localStorage.getItem("theme")?l("light-theme"):l("dark-theme")})),function(){const t=localStorage.getItem("sidebar");"true"==t?i(!0):"false"==t&&(i(!1),c.sidebar.classList.remove("todo__sidebar--open"))}(),c.burger.addEventListener("click",(()=>{c.sidebar.classList.toggle("todo__sidebar--open"),i(c.sidebar.classList.contains("todo__sidebar--open"))})),c.navBtns.forEach((t=>{t.addEventListener("click",(t=>{let e=t.currentTarget.getAttribute("data-target");c.navBtns.forEach((t=>{t.classList.remove("sidebar-todo__button--active")})),t.currentTarget.classList.add("sidebar-todo__button--active"),c.contents.forEach((t=>{t.classList.remove("todo__content--active")})),document.getElementById(`${e}`).classList.add("todo__content--active"),c.completedTasks.scrollHeight>s&&(c.completedTasks.style.overflowY="scroll")}))})),document.addEventListener("DOMContentLoaded",(()=>{c.inbox.classList.remove("todo__content--active"),c.completedTasks.classList.add("todo__content--active"),s=c.completedTasks.offsetHeight,c.completedTasks.style.maxHeight=`${s}px`,c.completedTasks.classList.remove("todo__content--active"),c.inbox.classList.add("todo__content--active"),a=c.inbox.offsetHeight,c.inbox.style.maxHeight=`${a}px`})),c.add.addEventListener("click",m),c.tasks.addEventListener("click",(s=>{const l=s.target,i=l.classList.contains("todo__checkbox-div"),m=l.parentElement.classList.contains("todo__task-delete"),u=l.parentElement.classList.contains("todo__task-edit");if(i){const s=l.parentElement.nextElementSibling.textContent,i=new Date,m=i.getTime(),u=i.getHours();let _=i.getMinutes();_<10&&(_=`0${_}`);const p={id:m,text:s,hours:u,minutes:_,date:i.getDate(),day:e[i.getDay()],month:t[i.getMonth()]};o.unshift(p);const g=l.parentElement.parentElement,b=g.getAttribute("id");d.play(),setTimeout((()=>{g.remove(),function(t,e,n){let o="";e.forEach(((n,o)=>{n.id===parseInt(t)&&e.splice(o,1)})),r(),n.forEach((t=>{const e=`<li id=${t.id} class="completed-todo__task">\n\t\t<time class="completed-todo__date">${t.date} ${t.month} â€§ ${t.day}</time>\n\t\t<div class="completed-todo__body">\n\t\t\t<p class="completed-todo__text">\n\t\t\t\t<strong>You</strong> completed a task: <span>${t.text}</span>\n\t\t\t</p>\n\t\t\t<time class="completed-todo__time">${t.hours}:${t.minutes}</time>\n\t\t</div>\n\t</li>`;o+=e})),c.completed.innerHTML=o}(b,n,o)}),300),c.completedCounter.innerHTML=`${o.length}`,c.inbox.scrollHeight==a&&(c.inbox.style.overflowY="hidden"),v(mssg="Task completed")}if(m){const t=l.parentElement.parentElement.parentElement,e=t.getAttribute("id"),o=t.querySelector(".todo__task-text").innerHTML;!function(t,e,n,o){c.modalDel.classList.add("modal-del--open"),c.modalDelText.innerHTML=n,c.modalDelClose.addEventListener("click",k),c.modalDelCancel.addEventListener("click",k),c.modalDelRemove.addEventListener("click",(()=>{t.remove(),o.forEach(((t,n)=>{t.id===parseInt(e)&&o.splice(n,1)})),k(),r(),v(mssg="Task deleted")}))}(t,e,o,n)}if(u){document.querySelectorAll(".todo__task").forEach((t=>{t.classList.remove("todo__task--editing")}));const t=l.parentElement.parentElement.parentElement,e=t.getAttribute("id"),o=t.querySelector(".todo__task-text"),s=t.querySelector(".todo__checkbox"),a=t.querySelector(".todo__task-actions");!function(t,e,o,s,a){const d=e;t.classList.add("todo__task--editing"),a.classList.add("todo__task-actions--editing"),s.remove(),o.style.paddingBottom="10px",a.innerHTML='\n\t\t<button class="todo__task-cancel btn-cancel" title="Cancel">Cancel</button>\n\t\t<button class="todo__task-save btn-save" title="Save">Save</button>\n\t';const c=a.querySelector(".todo__task-cancel"),l=a.querySelector(".todo__task-save"),i=document.createElement("input");i.setAttribute("type","text"),i.classList.add("todo__task-input"),i.value=o.innerHTML,o.replaceWith(i),i.focus(),i.addEventListener("input",(t=>{g(t.target.value,l)})),i.addEventListener("keyup",(t=>{"Enter"==t.key&&""==!t.target.value&&b(n,d,i)})),i.addEventListener("keydown",(t=>{"Escape"==t.key&&y()})),c.addEventListener("click",y),l.addEventListener("click",(()=>{b(n,d,i)}))}(t,e,o,s,a)}}))})();