(()=>{const t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];let n=[],o=[];const a=new Audio("sources/completed-task.mp3"),d={burger:document.getElementById("burger"),sidebar:document.getElementById("sidebar"),inbox:document.getElementById("inbox"),completedTasks:document.getElementById("completed-tasks"),inboxCounter:document.getElementById("inbox-counter"),completedCounter:document.getElementById("completed-counter"),switch:document.getElementById("switch"),add:document.getElementById("add"),tasks:document.getElementById("tasks"),navBtns:document.querySelectorAll(".sidebar-todo__button"),contents:document.querySelectorAll(".todo__content"),completed:document.getElementById("completed"),modalDel:document.querySelector(".modal-del"),modalDelClose:document.querySelector(".modal-del__close"),modalDelText:document.querySelector(".modal-del__text span"),modalDelCancel:document.querySelector(".modal-del__cancel"),modalDelRemove:document.querySelector(".modal-del__remove"),notify:document.getElementById("notification")};function s(t){localStorage.setItem("theme",t),document.documentElement.className=t}function c(t){localStorage.setItem("sidebar",t)}function l(t,e){0==t.length?e.innerHTML="":e.innerHTML=`${t.length}`}function i(t){const e=t.currentTarget.parentElement;e.classList.add("todo__add--active"),function(t){t.innerHTML='\n\t\t<input type="text" class="add-todo__input todo__task-input" placeholder="Task name">\n\t\t\t<div class="add-todo__actions">\n\t\t\t\t<button class="add-todo__cancel btn-cancel">Cancel</button>\n\t\t\t\t<button class="add-todo__add btn-add">Add task</button>\n\t\t\t</div>';const e=t.querySelector(".add-todo__input"),o=t.querySelector(".add-todo__cancel"),a=t.querySelector(".add-todo__add");e.focus(),a.disabled=!0,a.style.opacity=.8,a.style.pointerEvents="none";let d="";e.addEventListener("input",(t=>{d=t.target.value,p(d,a)})),e.addEventListener("keyup",(t=>{"Enter"==t.key&&""==!t.target.value&&r(e,d,a,n)})),e.addEventListener("keydown",(e=>{"Escape"==e.key&&m(t)})),a.addEventListener("click",(()=>{r(e,d,a,n)})),o.addEventListener("click",(()=>{m(t)}))}(e)}function r(t,e,o,a){const s={id:Date.now(),text:e};a.push(s),u(n),t.value="",t.focus(),o.disabled=!0,o.style.opacity=.8,o.style.pointerEvents="none",l(n,d.inboxCounter),localStorage.setItem("addedTasks",JSON.stringify(n)),_(mssg="Task added")}function m(t){t.classList.remove("todo__add--active"),t.innerHTML='\n\t<button id="add" class="add-todo__btn">\n\t\t<span class="add-todo__plus"></span>\n\t\t<span class="add-todo__text">Add task</span>\n\t</button>\n\t',document.getElementById("add").addEventListener("click",i)}function u(t){let e="";for(let n in t)e+=`<div id=${t[n].id} class="todo__task">\n\t\t\t<label class="todo__checkbox">\n\t\t\t\t<input type="checkbox">\n\t\t\t\t<div class="todo__checkbox-div"></div>\n\t\t\t</label>\n\t\t\t<p class="todo__task-text">${t[n].text}</p>\n\t\t\t<div class="todo__task-actions">\n\t\t\t\t<button class="todo__task-edit" title="Edit task">\n\t\t\t\t\t<img src="images/svg/edit.svg" alt="Edit">\n\t\t\t\t</button>\n\t\t\t\t<button class="todo__task-delete" title="Delete task">\n\t\t\t\t\t<img src="images/svg/trash.svg" alt="Trash">\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t`;d.tasks.innerHTML=e}function _(t){d.notify.innerHTML=`<div class="notification__content">\n\t\t<span class="notification__caption">${t}!</span>\n\t\t<button class="notification__close btn-close" title="Close"></button>\n\t</div>`,document.querySelector(".notification__close").addEventListener("click",(t=>{t.target.parentElement.remove()}))}function p(t,e){""===t?(e.disabled=!0,e.style.opacity=.8,e.style.pointerEvents="none"):(e.disabled=!1,e.style.opacity=1,e.style.pointerEvents="all")}function g(t,e,o){t.forEach((t=>{t.id===parseInt(e)&&(t.text=o.value)})),u(n),localStorage.setItem("addedTasks",JSON.stringify(n))}function v(){u(n)}function y(){d.modalDel.classList.remove("modal-del--open")}!function(){const t=localStorage.getItem("theme");"light-theme"==t?s("light-theme"):"dark-theme"==t&&(d.switch.classList.add("switch-todo--active"),s("dark-theme"))}(),d.switch.addEventListener("click",(t=>{t.currentTarget.classList.toggle("switch-todo--active"),"dark-theme"==localStorage.getItem("theme")?s("light-theme"):s("dark-theme")})),function(){const t=localStorage.getItem("addedTasks");null!=JSON.parse(t)&&(n=JSON.parse(t),u(n))}(),function(){const t=localStorage.getItem("completedTasks");null!=JSON.parse(t)&&(o=JSON.parse(t),function(t){let e="";for(let n in t)e+=`<li id=${t[n].id} class="completed-todo__task">\n\t\t\t<time class="completed-todo__date">${t[n].date} ${t[n].month} ‧ ${t[n].day}</time>\n\t\t\t<div class="completed-todo__body">\n\t\t\t\t<p class="completed-todo__text">\n\t\t\t\t\t<strong>You</strong> completed a task: <span>${t[n].text}</span>\n\t\t\t\t</p>\n\t\t\t\t<time class="completed-todo__time">${t[n].hours}:${t[n].minutes}</time>\n\t\t\t</div>\n\t\t</li>`;d.completed.innerHTML=e}(o))}(),function(){const t=localStorage.getItem("sidebar");"true"==t?c(!0):"false"==t&&(c(!1),d.sidebar.classList.remove("todo__sidebar--open"))}(),d.burger.addEventListener("click",(()=>{d.sidebar.classList.toggle("todo__sidebar--open"),c(d.sidebar.classList.contains("todo__sidebar--open"))})),d.navBtns.forEach((t=>{t.addEventListener("click",(t=>{let e=t.currentTarget.getAttribute("data-target");d.navBtns.forEach((t=>{t.classList.remove("sidebar-todo__button--active")})),t.currentTarget.classList.add("sidebar-todo__button--active"),d.contents.forEach((t=>{t.classList.remove("todo__content--active")})),document.getElementById(`${e}`).classList.add("todo__content--active")}))})),l(n,d.inboxCounter),l(o,d.completedCounter),d.add.addEventListener("click",i),d.tasks.addEventListener("click",(s=>{const c=s.target,i=c.classList.contains("todo__checkbox-div"),r=c.parentElement.classList.contains("todo__task-delete"),m=c.parentElement.classList.contains("todo__task-edit");if(i){const s=c.parentElement.nextElementSibling.textContent,i=new Date,r=i.getTime(),m=i.getHours();let u=i.getMinutes();u<10&&(u=`0${u}`);const p={id:r,text:s,hours:m,minutes:u,date:i.getDate(),day:e[i.getDay()],month:t[i.getMonth()]};o.unshift(p);const g=c.parentElement.parentElement,v=g.getAttribute("id");a.play(),setTimeout((()=>{g.remove(),function(t,e,n){let o="";e.forEach(((n,o)=>{n.id===parseInt(t)&&e.splice(o,1)})),n.forEach((t=>{const e=`<li id=${t.id} class="completed-todo__task">\n\t\t<time class="completed-todo__date">${t.date} ${t.month} ‧ ${t.day}</time>\n\t\t<div class="completed-todo__body">\n\t\t\t<p class="completed-todo__text">\n\t\t\t\t<strong>You</strong> completed a task: <span>${t.text}</span>\n\t\t\t</p>\n\t\t\t<time class="completed-todo__time">${t.hours}:${t.minutes}</time>\n\t\t</div>\n\t</li>`;o+=e})),d.completed.innerHTML=o}(v,n,o),localStorage.setItem("addedTasks",JSON.stringify(n)),localStorage.setItem("completedTasks",JSON.stringify(o)),l(n,d.inboxCounter),l(o,d.completedCounter)}),300),_(mssg="Task completed")}if(r){const t=c.parentElement.parentElement.parentElement,e=t.getAttribute("id"),o=t.querySelector(".todo__task-text").innerHTML;!function(t,e,o,a){d.modalDel.classList.add("modal-del--open"),d.modalDelText.innerHTML=o,d.modalDelClose.addEventListener("click",y),d.modalDelCancel.addEventListener("click",y),d.modalDelRemove.addEventListener("click",(()=>{t.remove(),a.forEach(((t,n)=>{t.id===parseInt(e)&&a.splice(n,1)})),localStorage.setItem("addedTasks",JSON.stringify(a)),l(n,d.inboxCounter),_(mssg="Task deleted"),y()}))}(t,e,o,n)}if(m){document.querySelectorAll(".todo__task").forEach((t=>{t.classList.remove("todo__task--editing")}));const t=c.parentElement.parentElement.parentElement,e=t.getAttribute("id"),o=t.querySelector(".todo__task-text"),a=t.querySelector(".todo__checkbox"),d=t.querySelector(".todo__task-actions");!function(t,e,o,a,d){const s=e;t.classList.add("todo__task--editing"),d.classList.add("todo__task-actions--editing"),a.remove(),o.style.paddingBottom="10px",d.innerHTML='\n\t\t<button class="todo__task-cancel btn-cancel" title="Cancel">Cancel</button>\n\t\t<button class="todo__task-save btn-save" title="Save">Save</button>\n\t';const c=d.querySelector(".todo__task-cancel"),l=d.querySelector(".todo__task-save"),i=document.createElement("input");i.setAttribute("type","text"),i.classList.add("todo__task-input"),i.value=o.innerHTML,o.replaceWith(i),i.focus(),i.addEventListener("input",(t=>{p(t.target.value,l)})),i.addEventListener("keyup",(t=>{"Enter"==t.key&&""==!t.target.value&&g(n,s,i)})),i.addEventListener("keydown",(t=>{"Escape"==t.key&&v()})),c.addEventListener("click",v),l.addEventListener("click",(()=>{g(n,s,i)}))}(t,e,o,a,d)}}))})();